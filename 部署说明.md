# NetBird VPN 部署包使用说明

## 📦 文件清单

你现在有以下文件：
- `docker-compose.yml` - Docker编排配置文件（使用v0.47.2稳定版本）
- `README.md` - 详细的部署和维护文档
- `deploy.sh` - 一键部署脚本
- `部署说明.md` - 本文件

## 🚀 快速部署步骤

### 1. 上传文件到服务器
将以上文件上传到你的Ubuntu 24.04服务器的 `/data/netbird/` 目录：

```bash
# 在服务器上创建目录
sudo mkdir -p /data/netbird
sudo chown $USER:$USER /data/netbird

# 使用scp上传文件（在本地执行）
scp docker-compose.yml your-server:/data/netbird/
scp README.md your-server:/data/netbird/
scp deploy.sh your-server:/data/netbird/
```

### 2. 执行一键部署

```bash
# 登录到你的服务器
ssh your-server

# 进入目录并执行部署
cd /data/netbird
chmod +x deploy.sh
./deploy.sh
```

### 3. 根据提示配置

脚本会询问你：
- 是否使用域名（推荐）还是IP地址（测试）
- 如果使用域名，输入你的域名和管理员邮箱

## 🔧 核心配置信息

### 版本信息
- **NetBird Management**: `netbirdio/management:v0.47.2`
- **NetBird Signal**: `netbirdio/signal:v0.47.2`
- **NetBird Relay**: `netbirdio/relay:v0.47.2`
- **Coturn**: `coturn/coturn:4.6.2-r3`
- **PostgreSQL**: `postgres:16-alpine`

### 网络端口
- **80/443**: Web管理界面
- **10000**: Signal服务
- **33073**: Relay服务
- **3478**: STUN/TURN
- **49152-65535/UDP**: TURN端口范围

### 公网IP配置
已预配置你的公网IP：`120.50.145.50`

## 📝 重要提醒

1. **域名解析**：如果使用域名，请确保域名已正确解析到 `120.50.145.50`
2. **防火墙**：脚本会自动配置UFW防火墙规则
3. **SSL证书**：使用域名时会自动申请Let's Encrypt证书
4. **数据持久化**：所有重要数据都存储在 `/data/netbird/` 目录下

## 🔄 常用操作

```bash
cd /data/netbird

# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f

# 重启服务
docker-compose restart

# 停止服务
docker-compose down

# 更新到最新版本
docker-compose pull && docker-compose up -d
```

## 📱 客户端连接

1. 访问管理界面（域名或IP）
2. 创建管理员账户
3. 生成Setup Key
4. 在客户端设备安装NetBird并使用Setup Key连接

## 🆘 如遇问题

详细的故障排除方法请参考 `README.md` 文档。

---

**预计部署时间**: 5-10分钟  
**推荐配置**: 2CPU + 4GB内存 + 20GB磁盘 